# lgb01

Minecraft Bukkitプラグインで、ログインボーナスシステムを実装します。プレイヤーが累積ログイン時間を蓄積し、設定された目標時間に達すると報酬を請求できます。ストリークボーナス、ボスバーディスプレイ、各種管理者コマンドが含まれます。

## 機能

### コア機能
- **プレイ時間追跡**: 各プレイヤーの累積ログイン時間を追跡します。
- **報酬システム**: プレイヤーが設定された目標プレイ時間に達すると、報酬を請求できます。
- **ボスバーディスプレイ**: 報酬が利用可能になるまでの残り時間をカスタマイズ可能なボスバーで表示します。
- **自動報酬**: 目標時間に達すると、インベントリが許す限り自動で報酬を付与します。
- **インベントリ満杯処理**: インベントリが満杯の場合、自動で報酬は付与されません。プレイヤーは`/rewardclaim`で手動で請求する必要があります。

### ストリークシステム
- **デイリーストリーク**: 報酬請求の連続日数を追跡します。
- **ストリークボーナス**: ストリークを維持するための追加報酬。
- **特別ストリーク報酬**: 特定のストリーク日数（例: 7日目、30日目）に対する設定可能な特別報酬。
- **特別倍数報酬**: ストリーク日数の倍数（例: 10日ごと）に対する報酬。

### 設定
- **設定可能な報酬**: `config.yml`で報酬アイテム、数量、メッセージを定義します。
- **メッセージカスタマイズ**: `message.yml`で全てのプラグインメッセージをカスタマイズします。
- **ボスバーカスタマイズ**: ボスバーの色、スタイル、タイトルを設定します。
- **時間設定**: 目標プレイ時間やその他の時間関連オプションを設定します。

## コマンド

### プレイヤーコマンド
- `/rewardclaim`  
  プレイヤーが目標プレイ時間に達している場合、利用可能な報酬を請求します。インベントリが満杯の場合、アイテムはプレイヤーの場所にドロップします。

### 管理者コマンド（OP権限が必要）
- `/rewardreload`  
  サーバーを再起動せずに設定ファイル（`config.yml`、`playerdata.yml`、`message.yml`）をリロードします。

- `/rewardforcegive <player>`  
  指定されたプレイヤーにプレイ時間に関係なく強制的に報酬を付与します。テストや手動報酬に便利です。

- `/rewardforcestreak <player> <days>`  
  指定されたプレイヤーのストリークカウントを指定された日数に強制的に設定します。最後のストリーク日付をリセットします。

- `/rewardsetstreak <player> <days>`  
  指定されたプレイヤーのストリークカウントを指定された日数に設定します。最後のストリーク日付はリセットしません。

- `/rewardresetplaytime <player>`  
  指定されたプレイヤーの累積プレイ時間を0にリセットします。

## 設定ファイル

### config.yml
`plugins/lgb01/config.yml`にあります。報酬、ボスバー設定、その他のプラグインオプションを定義します。

例の構造:
```yaml
# 目標プレイ時間（分）
reward-time: 30

# ボスバー設定
boss-bar-title: "&a報酬まで残り: %remaining%"
boss-bar-color: BLUE
boss-bar-style: SOLID

# 報酬アイテム（付与するアイテムのリスト）
reward-items:
  - item: DIAMOND
    amount: 1
  - item: GOLD_INGOT
    amount: 5

# ストリーク設定
streak-enabled: true

# 特別ストリーク報酬（特定の日の報酬）
special_streak_rewards:
  enabled: false
  rewards:
    7:
      items:
        - item: EMERALD
          amount: 2
      message: "&e7日連続ログイン！特別報酬です！"

# 特別倍数報酬（倍数の日の報酬）
special_multiple_rewards:
  enabled: true
  multiples:
    10:
      items:
        - item: DIAMOND
          amount: 10
      message: "&e10日連続ログイン！おめでとう！"
```

### message.yml
`plugins/lgb01/message.yml`にあります。プラグインメッセージをカスタマイズします。

例:
```yaml
reward-message: "&e報酬を受け取りました！"
inventory-full-message: "&cインベントリが満タンです。/rewardclaim で受け取ってください。"
```

### playerdata.yml
`plugins/lgb01/playerdata.yml`にあります。プレイヤーデータ（累積時間、ストリーク、最後の報酬）を保存します。手動で編集しないでください。

## インストール

1. プラグインのJARファイルをダウンロードします。
2. JARをサーバーの`plugins/`フォルダに配置します。
3. サーバーを再起動するか、`/reload`を使用します（本番環境では推奨されません）。
4. 必要に応じて`config.yml`と`message.yml`を設定します。
5. 設定を変更した場合、再びサーバーを再起動します。

## パーミッション

- 全てのプレイヤーコマンドは通常のプレイヤーが利用可能です。
- 管理者コマンドはOPステータスが必要です（パーミッションプラグインを使用する場合、適切なパーミッションが必要ですが、プラグインは現在OPをチェックします）。

## 互換性

- **Minecraftバージョン**: 1.16+（最新のAPI機能を使用）。
- **Bukkit/Spigot/Paper**: 標準的なBukkit実装と互換。

## 開発

- **ソースコード**: GitHubで利用可能。
- **ビルド**: Mavenを使用してプロジェクトをビルドします。
- **依存関係**: Bukkit APIが必要です。

## ライセンス

このプラグインはオープンソースです。詳細はライセンスファイルを参照してください。

## サポート

問題や質問については、GitHubリポジトリでイシューを作成してください。